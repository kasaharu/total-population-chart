"use strict";(self.webpackChunktotal_population_chart=self.webpackChunktotal_population_chart||[]).push([[22],{9022:(Zh,Jn,P)=>{P.r(Jn),P.d(Jn,{TotalPopulationChartModule:()=>jh});var Ot=P(9808),u=P(7587),Ro=P(188),Le=P(8306),zo=P(4742),Ue=P(8421),Kn=P(7669),Tt=P(5403),$o=P(3268),Ho=P(1810),Pt=P(4004);let Qn=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(u.Qsj),u.Y36(u.SBq))},t.\u0275dir=u.lG2({type:t}),t})(),pt=(()=>{class t extends Qn{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(t)))(r||t)}}(),t.\u0275dir=u.lG2({type:t,features:[u.qOj]}),t})();const it=new u.OlP("NgValueAccessor"),Uo={provide:it,useExisting:(0,u.Gpc)(()=>Ye),multi:!0};let Ye=(()=>{class t extends pt{writeValue(n){this.setProperty("checked",n)}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(t)))(r||t)}}(),t.\u0275dir=u.lG2({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){1&n&&u.NdJ("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[u._Bn([Uo]),u.qOj]}),t})();const Yo={provide:it,useExisting:(0,u.Gpc)(()=>qe),multi:!0},jo=new u.OlP("CompositionEventMode");let qe=(()=>{class t extends Qn{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function qo(){const t=(0,Ot.q)()?(0,Ot.q)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(jo,8))},t.\u0275dir=u.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&u.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[u._Bn([Yo]),u.qOj]}),t})();const Y=new u.OlP("NgValidators"),ht=new u.OlP("NgAsyncValidators");function lr(t){return null!=t}function cr(t){const e=(0,u.QGY)(t)?(0,Ro.D)(t):t;return(0,u.CqO)(e),e}function hr(t){let e={};return t.forEach(n=>{e=null!=n?Object.assign(Object.assign({},e),n):e}),0===Object.keys(e).length?null:e}function fr(t,e){return e.map(n=>n(t))}function dr(t){return t.map(e=>function Xo(t){return!t.validate}(e)?e:n=>e.validate(n))}function je(t){return null!=t?function pr(t){if(!t)return null;const e=t.filter(lr);return 0==e.length?null:function(n){return hr(fr(n,e))}}(dr(t)):null}function We(t){return null!=t?function mr(t){if(!t)return null;const e=t.filter(lr);return 0==e.length?null:function(n){return function Lo(...t){const e=(0,Kn.jO)(t),{args:n,keys:r}=(0,zo.D)(t),i=new Le.y(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let h=0;h<s;h++){let d=!1;(0,Ue.Xf)(n[h]).subscribe((0,Tt.x)(o,p=>{d||(d=!0,c--),a[h]=p},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?(0,Ho.n)(r,a):a),o.complete())}))}});return e?i.pipe((0,$o.Z)(e)):i}(fr(n,e).map(cr)).pipe((0,Pt.U)(hr))}}(dr(t)):null}function gr(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function _r(t){return t._rawValidators}function yr(t){return t._rawAsyncValidators}function Xe(t){return t?Array.isArray(t)?t:[t]:[]}function ee(t,e){return Array.isArray(t)?t.includes(e):t===e}function vr(t,e){const n=Xe(e);return Xe(t).forEach(i=>{ee(n,i)||n.push(i)}),n}function wr(t,e){return Xe(e).filter(n=>!ee(t,n))}class Cr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=je(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=We(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ft extends Cr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class X extends Cr{get formDirective(){return null}get path(){return null}}class br{constructor(e){this._cd=e}is(e){var n,r,i;return"submitted"===e?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let xr=(()=>{class t extends br{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(ft,2))},t.\u0275dir=u.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),t})(),Ar=(()=>{class t extends br{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(X,10))},t.\u0275dir=u.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),t})();function re(t,e){return[...e.path,t]}function It(t,e){Ke(t,e),e.valueAccessor.writeValue(t.value),function rs(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Mr(t,e)})}(t,e),function os(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function is(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Mr(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function ns(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ie(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),se(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function oe(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Ke(t,e){const n=_r(t);null!==e.validator?t.setValidators(gr(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=yr(t);null!==e.asyncValidator?t.setAsyncValidators(gr(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();oe(e._rawValidators,i),oe(e._rawAsyncValidators,i)}function se(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=_r(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const i=yr(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}const r=()=>{};return oe(e._rawValidators,r),oe(e._rawAsyncValidators,r),n}function Mr(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function en(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Gt="VALID",ae="INVALID",bt="PENDING",Bt="DISABLED";function rn(t){return(ue(t)?t.validators:t)||null}function Sr(t){return Array.isArray(t)?je(t):t||null}function on(t,e){return(ue(e)?e.asyncValidators:t)||null}function Fr(t){return Array.isArray(t)?We(t):t||null}function ue(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const kr=t=>t instanceof un,sn=t=>t instanceof Rt;function Or(t){return kr(t)?t.value:t.getRawValue()}function Tr(t,e){const n=sn(t),r=t.controls;if(!(n?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[e])throw new u.vHH(1001,"")}function Pr(t,e){sn(t),t._forEachChild((r,i)=>{if(void 0===e[i])throw new u.vHH(1002,"")})}class an{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=Sr(this._rawValidators),this._composedAsyncValidatorFn=Fr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gt}get invalid(){return this.status===ae}get pending(){return this.status==bt}get disabled(){return this.status===Bt}get enabled(){return this.status!==Bt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Sr(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Fr(e)}addValidators(e){this.setValidators(vr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wr(e,this._rawAsyncValidators))}hasValidator(e){return ee(this._rawValidators,e)}hasAsyncValidator(e){return ee(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bt,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Bt,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Gt,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gt||this.status===bt)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bt:Gt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bt,this._hasOwnPendingAsyncValidator=!0;const n=cr(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){return function ls(t,e,n){if(null==e||(Array.isArray(e)||(e=e.split(n)),Array.isArray(e)&&0===e.length))return null;let r=t;return e.forEach(i=>{r=sn(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(t=>t instanceof ln)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Bt:this.errors?ae:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bt)?bt:this._anyControlsHaveStatus(ae)?ae:Gt}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ue(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class un extends an{constructor(e=null,n,r){super(rn(n),on(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ue(n)&&n.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){en(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){en(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Rt extends an{constructor(e,n,r){super(rn(n),on(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Pr(this,e),Object.keys(e).forEach(r=>{Tr(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=Or(n),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const n of Object.keys(this.controls)){const r=this.controls[n];if(this.contains(n)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ln extends an{constructor(e,n,r){super(rn(n),on(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Pr(this,e),e.forEach((r,i)=>{Tr(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>Or(e))}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Ir=(()=>{class t extends X{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return re(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(t)))(r||t)}}(),t.\u0275dir=u.lG2({type:t,features:[u.qOj]}),t})(),zr=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Hr=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({}),t})();const hn=new u.OlP("NgModelWithFormControlWarning"),vs={provide:X,useExisting:(0,u.Gpc)(()=>le)};let le=(()=>{class t extends X{constructor(n,r){super(),this.validators=n,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(se(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return It(r,n),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){ie(n.control||null,n,!1),en(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function Nr(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(ie(r||null,n),kr(i)&&(It(i,n),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function Er(t,e){Ke(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function ss(t,e){return se(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ke(this.form,this),this._oldForm&&se(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(Y,10),u.Y36(ht,10))},t.\u0275dir=u.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(n,r){1&n&&u.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([vs]),u.qOj,u.TTD]}),t})();const ws={provide:X,useExisting:(0,u.Gpc)(()=>fn)};let fn=(()=>{class t extends Ir{constructor(n,r,i){super(),this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){qr(this._parent)}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(X,13),u.Y36(Y,10),u.Y36(ht,10))},t.\u0275dir=u.lG2({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[u._Bn([ws]),u.qOj]}),t})();const Cs={provide:X,useExisting:(0,u.Gpc)(()=>ce)};let ce=(()=>{class t extends X{constructor(n,r,i){super(),this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return re(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){qr(this._parent)}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(X,13),u.Y36(Y,10),u.Y36(ht,10))},t.\u0275dir=u.lG2({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[u._Bn([Cs]),u.qOj]}),t})();function qr(t){return!(t instanceof fn||t instanceof le||t instanceof ce)}const bs={provide:ft,useExisting:(0,u.Gpc)(()=>dn)};let dn=(()=>{class t extends ft{constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function tn(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===qe?n=o:function us(t){return Object.getPrototypeOf(t.constructor)===pt}(o)?r=o:i=o}),i||r||n||null}(0,o)}set isDisabled(n){}ngOnChanges(n){this._added||this._setUpControl(),function Qe(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return re(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(n){return new(n||t)(u.Y36(X,13),u.Y36(Y,10),u.Y36(ht,10),u.Y36(it,10),u.Y36(hn,8))},t.\u0275dir=u.lG2({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([bs]),u.qOj,u.TTD]}),t})(),Bs=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[Hr]]}),t})(),Rs=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:hn,useValue:n.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[Bs]}),t})();var ii=P(7760);function oi(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function si(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(l){oi(o,r,i,s,a,"next",l)}function a(l){oi(o,r,i,s,a,"throw",l)}s(void 0)})}}var ai=P(727);class zs extends ai.w0{constructor(e,n){super()}schedule(e,n=0){return this}}const he={setInterval(t,e,...n){const{delegate:r}=he;return(null==r?void 0:r.setInterval)?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=he;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};var $s=P(8737);class ui extends zs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return he.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;he.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,$s.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}let _n,Hs=1;const fe={};function li(t){return t in fe&&(delete fe[t],!0)}const Ls={setImmediate(t){const e=Hs++;return fe[e]=!0,_n||(_n=Promise.resolve()),_n.then(()=>li(e)&&t()),e},clearImmediate(t){li(t)}},{setImmediate:Us,clearImmediate:Ys}=Ls,de={setImmediate(...t){const{delegate:e}=de;return((null==e?void 0:e.setImmediate)||Us)(...t)},clearImmediate(t){const{delegate:e}=de;return((null==e?void 0:e.clearImmediate)||Ys)(t)},delegate:void 0},yn={now:()=>(yn.delegate||Date).now(),delegate:void 0};class $t{constructor(e,n=$t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}$t.now=yn.now;class ci extends $t{constructor(e,n=$t.now){super(e,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Ws=new class js extends ci{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw i}}}(class qs extends ui{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return null!==r&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=de.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,n,r);e.actions.some(i=>i.id===n)||(de.clearImmediate(n),e._scheduled=void 0)}});var hi=P(7579);class vn extends hi.x{constructor(e=1/0,n=1/0,r=yn){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}}var fi=P(576);function di(t){return!!t&&(t instanceof Le.y||(0,fi.m)(t.lift)&&(0,fi.m)(t.subscribe))}var pi=P(9646),mi=P(9975);const gi=new class Zs extends ci{}(class Xs extends ui{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}});var Js=P(2843),Ks=P(9841),Qs=P(4351),wn=P(4482),_i=P(4671),yi=P(5032);function pe(t){return(0,wn.e)((e,n)=>{(0,Ue.Xf)(t).subscribe((0,Tt.x)(n,()=>n.complete(),yi.Z)),!n.closed&&e.subscribe(n)})}var ea=P(5698);function ra(t,e){return t===e}var ia=P(3099);function vi(){return t=>new Le.y(e=>{let n,r;const i=new ai.w0;return i.add(t.subscribe({complete:()=>{n&&e.next(r),e.complete()},error:o=>{e.error(o)},next:o=>{r=o,n||(n=Ws.schedule(()=>{e.next(r),n=void 0}),i.add(n))}})),i})}const sa=new u.OlP("@ngrx/component-store Initial State");let aa=(()=>{class t{constructor(n){this.destroySubject$=new vn(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new vn(1),this.isInitialized=!1,this.notInitializedErrorMessage=`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`,this.state$=this.select(r=>r),n&&this.initState(n)}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(n){return r=>{let i;const s=(di(r)?r:(0,pi.of)(r)).pipe((0,Qs.b)(a=>this.isInitialized?(0,mi.x)([a],gi).pipe(function ta(...t){const e=(0,Kn.jO)(t);return(0,wn.e)((n,r)=>{const i=t.length,o=new Array(i);let s=t.map(()=>!1),a=!1;for(let l=0;l<i;l++)(0,Ue.Xf)(t[l]).subscribe((0,Tt.x)(r,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(_i.y))&&(s=null))},yi.Z));n.subscribe((0,Tt.x)(r,l=>{if(a){const c=[l,...o];r.next(e?e(...c):c)}}))})}(this.stateSubject$)):(0,Js._)(()=>new Error(this.notInitializedErrorMessage))),pe(this.destroy$)).subscribe({next:([a,l])=>{this.stateSubject$.next(n(l,a))},error:a=>{i=a,this.stateSubject$.error(a)}});if(i)throw i;return s}}initState(n){(0,mi.x)([n],gi).subscribe(r=>{this.isInitialized=!0,this.stateSubject$.next(r)})}setState(n){"function"!=typeof n?this.initState(n):this.updater(n)()}patchState(n){const r="function"==typeof n?n(this.get()):n;this.updater((i,o)=>Object.assign(Object.assign({},i),o))(r)}get(n){if(!this.isInitialized)throw new Error(this.notInitializedErrorMessage);let r;return this.stateSubject$.pipe((0,ea.q)(1)).subscribe(i=>{r=n?n(i):i}),r}select(...n){const{observables:r,projector:i,config:o}=function ua(t){const e=Array.from(t);let r,n={debounce:!1};const i=e.pop();return"function"!=typeof i?(n=Object.assign(Object.assign({},n),i),r=e.pop()):r=i,{observables:e,projector:r,config:n}}(n);let s;return s=0===r.length?this.stateSubject$.pipe(o.debounce?vi():a=>a,(0,Pt.U)(a=>i(a))):(0,Ks.a)(r).pipe(o.debounce?vi():a=>a,(0,Pt.U)(a=>i(...a))),s.pipe(function na(t,e=_i.y){return t=null!=t?t:ra,(0,wn.e)((n,r)=>{let i,o=!0;n.subscribe((0,Tt.x)(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}(),function oa(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=null!=t?t:1/0,(0,ia.B)({connector:()=>new vn(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}({refCount:!0,bufferSize:1}),pe(this.destroy$))}effect(n){const r=new hi.x;return n(r).pipe(pe(this.destroy$)).subscribe(),i=>(di(i)?i:(0,pi.of)(i)).pipe(pe(this.destroy$)).subscribe(s=>{r.next(s)})}}return t.\u0275fac=function(n){return new(n||t)(u.LFG(sa,8))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})();var la=P(6805);function wi(t,e){const n="object"==typeof e;return new Promise((r,i)=>{let s,o=!1;t.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(e.defaultValue):i(new la.K)}})})}var me=P(520),ge=P(2340);const ca={headers:new me.WM({"Content-Type":"application/json","X-API-KEY":ge.N.apiKey})};let ha=(()=>{class t{constructor(n){this.http=n}getPrefectures(){return this.http.get(`${ge.N.apiEndpoint}/api/v1/prefectures`,ca).pipe((0,Pt.U)(n=>n.result))}}return t.\u0275fac=function(n){return new(n||t)(u.LFG(me.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fa={headers:new me.WM({"Content-Type":"application/json","X-API-KEY":ge.N.apiKey})};let da=(()=>{class t{constructor(n){this._http=n}getPopulationComposition(n){return this._http.get(`${ge.N.apiEndpoint}/api/v1/population/composition/perYear?cityCode=-&prefCode=${n}`,fa).pipe((0,Pt.U)(r=>r.result.data[0].data))}}return t.\u0275fac=function(n){return new(n||t)(u.LFG(me.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ci=(()=>{class t extends aa{constructor(n,r){super({prefectures:null,populationComposition:null}),this._prefectureApi=n,this._populationCompositionApi=r,this.prefectures$=this.select(i=>i.prefectures),this.savePrefectures=this.updater((i,o)=>Object.assign(Object.assign({},i),{prefectures:o})),this.populationComposition$=this.select(i=>i.populationComposition),this.savePopulationComposition=this.updater((i,o)=>Object.assign(Object.assign({},i),{populationComposition:o}))}fetchPrefectures(){var n=this;return si(function*(){const r=yield wi(n._prefectureApi.getPrefectures());n.savePrefectures(r)})()}fetchPopulationComposition(n){var r=this;return si(function*(){if(0===n.length)return;console.log("usecase - fetchPopulationComposition: "),console.log(n);const i=yield Promise.all(n.map(o=>wi(r._populationCompositionApi.getPopulationComposition(o.prefCode))));console.log(i),r.savePopulationComposition(i)})()}}return t.\u0275fac=function(n){return new(n||t)(u.LFG(ha),u.LFG(da))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})();function pa(t,e){if(1&t){const n=u.EpF();u.TgZ(0,"div",3)(1,"input",4),u.NdJ("change",function(){return u.CHM(n),u.oxw().onChange()}),u.qZA(),u._uU(2),u.qZA()}if(2&t){const n=e.index,r=u.oxw();u.xp6(1),u.Q6J("formControlName",n),u.uIk("disabled",!!r.isDisabled(n)||null),u.xp6(1),u.hij(" ",r.getPrefectureName(n)," ")}}let ma=(()=>{class t{constructor(){this.prefectures=null,this.prefChecked=new u.vpe,this.formGroup=new Rt({checkboxes:new ln([])})}ngOnChanges(){if(null!==this.prefectures){const n=this.prefectures.map(r=>new un(!1));this.formGroup=new Rt({checkboxes:new ln(n)})}}get checkboxes(){return this.formGroup.get("checkboxes")}getPrefectureName(n){return null===this.prefectures?"":this.prefectures[n].prefName}onChange(){const r=[];this.formGroup.value.checkboxes.forEach((i,o)=>{null!==this.prefectures&&!0===i&&r.push(this.prefectures[o])}),this.prefChecked.emit(r)}isDisabled(n){const r=this.formGroup.value.checkboxes;return r.filter(o=>!0===o).length>=10&&!r[n]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-prefectures-form"]],inputs:{prefectures:"prefectures"},outputs:{prefChecked:"prefChecked"},features:[u.TTD],decls:3,vars:2,consts:[[3,"formGroup"],["formArrayName","checkboxes",1,"checkboxes"],["class","prefecture",4,"ngFor","ngForOf"],[1,"prefecture"],["type","checkbox",3,"formControlName","change"]],template:function(n,r){1&n&&(u.TgZ(0,"form",0)(1,"div",1),u.YNc(2,pa,3,3,"div",2),u.qZA()()),2&n&&(u.Q6J("formGroup",r.formGroup),u.xp6(2),u.Q6J("ngForOf",r.checkboxes.controls))},directives:[zr,Ar,le,ce,Ot.sg,Ye,xr,dn],styles:[".checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.prefecture[_ngcontent-%COMP%]{width:100px}"]}),t})();function ga(t){return t}function _a(t){return"translate("+t+",0)"}function ya(t){return"translate(0,"+t+")"}function va(t){return e=>+t(e)}function wa(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ca(){return!this.__axis}function ve(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,h=4===t||2===t?"x":"y",d=1===t||3===t?_a:ya;function p(_){var k=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,I=null==i?e.tickFormat?e.tickFormat.apply(e,n):ga:i,y=Math.max(o,0)+a,g=e.range(),x=+g[0]+l,w=+g[g.length-1]+l,D=(e.bandwidth?wa:va)(e.copy(),l),M=_.selection?_.selection():_,T=M.selectAll(".domain").data([null]),$=M.selectAll(".tick").data(k,e).order(),B=$.exit(),L=$.enter().append("g").attr("class","tick"),G=$.select("line"),A=$.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(L),G=G.merge(L.append("line").attr("stroke","currentColor").attr(h+"2",c*o)),A=A.merge(L.append("text").attr("fill","currentColor").attr(h,c*y).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),_!==M&&(T=T.transition(_),$=$.transition(_),G=G.transition(_),A=A.transition(_),B=B.transition(_).attr("opacity",1e-6).attr("transform",function(R){return isFinite(R=D(R))?d(R+l):this.getAttribute("transform")}),L.attr("opacity",1e-6).attr("transform",function(R){var O=this.parentNode.__axis;return d((O&&isFinite(O=O(R))?O:D(R))+l)})),B.remove(),T.attr("d",4===t||2===t?s?"M"+c*s+","+x+"H"+l+"V"+w+"H"+c*s:"M"+l+","+x+"V"+w:s?"M"+x+","+c*s+"V"+l+"H"+w+"V"+c*s:"M"+x+","+l+"H"+w),$.attr("opacity",1).attr("transform",function(R){return d(D(R)+l)}),G.attr(h+"2",c*o),A.attr(h,c*y).text(I),M.filter(Ca).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),M.each(function(){this.__axis=D})}return p.scale=function(_){return arguments.length?(e=_,p):e},p.ticks=function(){return n=Array.from(arguments),p},p.tickArguments=function(_){return arguments.length?(n=null==_?[]:Array.from(_),p):n.slice()},p.tickValues=function(_){return arguments.length?(r=null==_?null:Array.from(_),p):r&&r.slice()},p.tickFormat=function(_){return arguments.length?(i=_,p):i},p.tickSize=function(_){return arguments.length?(o=s=+_,p):o},p.tickSizeInner=function(_){return arguments.length?(o=+_,p):o},p.tickSizeOuter=function(_){return arguments.length?(s=+_,p):s},p.tickPadding=function(_){return arguments.length?(a=+_,p):a},p.offset=function(_){return arguments.length?(l=+_,p):l},p}function Aa(){}function bn(t){return null==t?Aa:function(){return this.querySelector(t)}}function Ma(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Ea(){return[]}function xi(t){return null==t?Ea:function(){return this.querySelectorAll(t)}}function Ai(t){return function(){return this.matches(t)}}function Vi(t){return function(e){return e.matches(t)}}var Sa=Array.prototype.find;function ka(){return this.firstElementChild}var Ta=Array.prototype.filter;function Pa(){return Array.from(this.children)}function Mi(t){return new Array(t.length)}function we(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function za(t){return function(){return t}}function $a(t,e,n,r,i,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new we(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function Ha(t,e,n,r,i,o,s){var a,l,_,c=new Map,h=e.length,d=o.length,p=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(p[a]=_=s.call(l,l.__data__,a,e)+"",c.has(_)?i[a]=l:c.set(_,l));for(a=0;a<d;++a)_=s.call(t,o[a],a,o)+"",(l=c.get(_))?(r[a]=l,l.__data__=o[a],c.delete(_)):n[a]=new we(t,o[a]);for(a=0;a<h;++a)(l=e[a])&&c.get(p[a])===l&&(i[a]=l)}function La(t){return t.__data__}function Ya(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ja(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}we.prototype={constructor:we,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var xn="http://www.w3.org/1999/xhtml";const Ei={svg:"http://www.w3.org/2000/svg",xhtml:xn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ce(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Ei.hasOwnProperty(e)?{space:Ei[e],local:t}:t}function iu(t){return function(){this.removeAttribute(t)}}function ou(t){return function(){this.removeAttributeNS(t.space,t.local)}}function su(t,e){return function(){this.setAttribute(t,e)}}function au(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function uu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function lu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Di(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function hu(t){return function(){this.style.removeProperty(t)}}function fu(t,e,n){return function(){this.style.setProperty(t,e,n)}}function du(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xt(t,e){return t.style.getPropertyValue(e)||Di(t).getComputedStyle(t,null).getPropertyValue(e)}function mu(t){return function(){delete this[t]}}function gu(t,e){return function(){this[t]=e}}function _u(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ni(t){return t.trim().split(/^|\s+/)}function An(t){return t.classList||new Si(t)}function Si(t){this._node=t,this._names=Ni(t.getAttribute("class")||"")}function Fi(t,e){for(var n=An(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ki(t,e){for(var n=An(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function vu(t){return function(){Fi(this,t)}}function wu(t){return function(){ki(this,t)}}function Cu(t,e){return function(){(e.apply(this,arguments)?Fi:ki)(this,t)}}function xu(){this.textContent=""}function Au(t){return function(){this.textContent=t}}function Vu(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Eu(){this.innerHTML=""}function Du(t){return function(){this.innerHTML=t}}function Nu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Fu(){this.nextSibling&&this.parentNode.appendChild(this)}function Ou(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xn&&e.documentElement.namespaceURI===xn?e.createElement(t):e.createElementNS(n,t)}}function Iu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Oi(t){var e=Ce(t);return(e.local?Iu:Pu)(e)}function Bu(){return null}function zu(){var t=this.parentNode;t&&t.removeChild(this)}function Hu(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Lu(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ju(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Wu(t){return function(){var e=this.__on;if(e){for(var o,n=0,r=-1,i=e.length;n<i;++n)o=e[n],t.type&&o.type!==t.type||o.name!==t.name?e[++r]=o:this.removeEventListener(o.type,o.listener,o.options);++r?e.length=r:delete this.__on}}}function Xu(t,e,n){return function(){var i,r=this.__on,o=function qu(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ti(t,e,n){var r=Di(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ju(t,e){return function(){return Ti(this,t,e)}}function Ku(t,e){return function(){return Ti(this,t,e.apply(this,arguments))}}Si.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Pi=[null];function tt(t,e){this._groups=t,this._parents=e}function Ii(){return new tt([[document.documentElement]],Pi)}tt.prototype=Ii.prototype={constructor:tt,select:function Va(t){"function"!=typeof t&&(t=bn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var l,c,o=e[i],s=o.length,a=r[i]=new Array(s),h=0;h<s;++h)(l=o[h])&&(c=t.call(l,l.__data__,h,o))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new tt(r,this._parents)},selectAll:function Na(t){t="function"==typeof t?function Da(t){return function(){return Ma(t.apply(this,arguments))}}(t):xi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var l,s=e[o],a=s.length,c=0;c<a;++c)(l=s[c])&&(r.push(t.call(l,l.__data__,c,s)),i.push(l));return new tt(r,i)},selectChild:function Oa(t){return this.select(null==t?ka:function Fa(t){return function(){return Sa.call(this.children,t)}}("function"==typeof t?t:Vi(t)))},selectChildren:function Ga(t){return this.selectAll(null==t?Pa:function Ia(t){return function(){return Ta.call(this.children,t)}}("function"==typeof t?t:Vi(t)))},filter:function Ba(t){"function"!=typeof t&&(t=Ai(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var l,o=e[i],s=o.length,a=r[i]=[],c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new tt(r,this._parents)},data:function Ua(t,e){if(!arguments.length)return Array.from(this,La);var n=e?Ha:$a,r=this._parents,i=this._groups;"function"!=typeof t&&(t=za(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var h=r[c],d=i[c],p=d.length,_=Ya(t.call(h,h&&h.__data__,c,r)),k=_.length,I=a[c]=new Array(k),y=s[c]=new Array(k),g=l[c]=new Array(p);n(h,d,I,y,g,_,e);for(var D,M,x=0,w=0;x<k;++x)if(D=I[x]){for(x>=w&&(w=x+1);!(M=y[w])&&++w<k;);D._next=M||null}}return(s=new tt(s,r))._enter=a,s._exit=l,s},enter:function Ra(){return new tt(this._enter||this._groups.map(Mi),this._parents)},exit:function qa(){return new tt(this._exit||this._groups.map(Mi),this._parents)},join:function ja(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function Wa(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=Math.min(i,r.length),a=new Array(i),l=0;l<s;++l)for(var _,c=n[l],h=r[l],d=c.length,p=a[l]=new Array(d),k=0;k<d;++k)(_=c[k]||h[k])&&(p[k]=_);for(;l<i;++l)a[l]=n[l];return new tt(a,this._parents)},selection:function el(){return this},order:function Xa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s,r=t[e],i=r.length-1,o=r[i];--i>=0;)(s=r[i])&&(o&&4^s.compareDocumentPosition(o)&&o.parentNode.insertBefore(s,o),o=s);return this},sort:function Za(t){function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}t||(t=Ja);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var c,s=n[o],a=s.length,l=i[o]=new Array(a),h=0;h<a;++h)(c=s[h])&&(l[h]=c);l.sort(e)}return new tt(i,this._parents).order()},call:function Ka(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Qa(){return Array.from(this)},node:function tu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function eu(){let t=0;for(const e of this)++t;return t},empty:function nu(){return!this.node()},each:function ru(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a,i=e[n],o=0,s=i.length;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this},attr:function cu(t,e){var n=Ce(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ou:iu:"function"==typeof e?n.local?lu:uu:n.local?au:su)(n,e))},style:function pu(t,e,n){return arguments.length>1?this.each((null==e?hu:"function"==typeof e?du:fu)(t,e,null==n?"":n)):xt(this.node(),t)},property:function yu(t,e){return arguments.length>1?this.each((null==e?mu:"function"==typeof e?_u:gu)(t,e)):this.node()[t]},classed:function bu(t,e){var n=Ni(t+"");if(arguments.length<2){for(var r=An(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Cu:e?vu:wu)(n,e))},text:function Mu(t){return arguments.length?this.each(null==t?xu:("function"==typeof t?Vu:Au)(t)):this.node().textContent},html:function Su(t){return arguments.length?this.each(null==t?Eu:("function"==typeof t?Nu:Du)(t)):this.node().innerHTML},raise:function ku(){return this.each(Fu)},lower:function Tu(){return this.each(Ou)},append:function Gu(t){var e="function"==typeof t?t:Oi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function Ru(t,e){var n="function"==typeof t?t:Oi(t),r=null==e?Bu:"function"==typeof e?e:bn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function $u(){return this.each(zu)},clone:function Uu(t){return this.select(t?Lu:Hu)},datum:function Yu(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function Zu(t,e,n){var i,s,r=ju(t+""),o=r.length;if(!(arguments.length<2)){for(a=e?Xu:Wu,i=0;i<o;++i)this.each(a(r[i],e,n));return this}var a=this.node().__on;if(a)for(var h,l=0,c=a.length;l<c;++l)for(i=0,h=a[l];i<o;++i)if((s=r[i]).type===h.type&&s.name===h.name)return h.value},dispatch:function Qu(t,e){return this.each(("function"==typeof e?Ku:Ju)(t,e))},[Symbol.iterator]:function*tl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s,r=t[e],i=0,o=r.length;i<o;++i)(s=r[i])&&(yield s)}};const Lt=Ii;var nl={value:()=>{}};function Gi(){for(var r,t=0,e=arguments.length,n={};t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new be(n)}function be(t){this._=t}function rl(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}function il(t,e){for(var i,n=0,r=t.length;n<r;++n)if((i=t[n]).name===e)return i.value}function Bi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=nl,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}be.prototype=Gi.prototype={constructor:be,on:function(t,e){var i,n=this._,r=rl(t+"",n),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Bi(n[i],t.name,e);else if(null==e)for(i in n)n[i]=Bi(n[i],t.name,null);return this}for(;++o<s;)if((i=(t=r[o]).type)&&(i=il(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new be(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,o,n=new Array(i),r=0;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(o=this._[t]).length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const ol=Gi;var xe,qt,At=0,Ut=0,Yt=0,Ae=0,gt=0,Ve=0,jt="object"==typeof performance&&performance.now?performance:Date,zi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vn(){return gt||(zi(sl),gt=jt.now()+Ve)}function sl(){gt=0}function Me(){this._call=this._time=this._next=null}function $i(t,e,n){var r=new Me;return r.restart(t,e,n),r}function Hi(){gt=(Ae=jt.now())+Ve,At=Ut=0;try{!function al(){Vn(),++At;for(var e,t=xe;t;)(e=gt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--At}()}finally{At=0,function ll(){for(var t,n,e=xe,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:xe=n);qt=t,Mn(r)}(),gt=0}}function ul(){var t=jt.now(),e=t-Ae;e>1e3&&(Ve-=e,Ae=t)}function Mn(t){At||(Ut&&(Ut=clearTimeout(Ut)),t-gt>24?(t<1/0&&(Ut=setTimeout(Hi,t-jt.now()-Ve)),Yt&&(Yt=clearInterval(Yt))):(Yt||(Ae=jt.now(),Yt=setInterval(ul,1e3)),At=1,zi(Hi)))}function Li(t,e,n){var r=new Me;return r.restart(i=>{r.stop(),t(i+e)},e=null==e?0:+e,n),r}Me.prototype=$i.prototype={constructor:Me,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Vn():+n)+(null==e?0:+e),!this._next&&qt!==this&&(qt?qt._next=this:xe=this,qt=this),this._call=t,this._time=n,Mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mn())}};var cl=ol("start","end","cancel","interrupt"),hl=[];function Ne(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function fl(t,e,n){var i,r=t.__transition;function s(c){var h,d,p,_;if(1!==n.state)return l();for(h in r)if((_=r[h]).name===n.name){if(3===_.state)return Li(s);4===_.state?(_.state=6,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete r[h]):+h<e&&(_.state=6,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete r[h])}if(Li(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(p=n.tween.length),h=0,d=-1;h<p;++h)(_=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=_);i.length=d+1}}function a(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=5,1),d=-1,p=i.length;++d<p;)i[d].call(t,h);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var c in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=$i(function o(c){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:cl,tween:hl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Nn(t,e){var n=et(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function ot(t,e){var n=et(t,e);if(n.state>3)throw new Error("too late; already running");return n}function et(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function nt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Se,ji=180/Math.PI,Sn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wi(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ji,skewX:Math.atan(l)*ji,scaleX:s,scaleY:a}}function Xi(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}return function(c,h){var d=[],p=[];return c=t(c),h=t(h),function o(c,h,d,p,_,k){if(c!==d||h!==p){var I=_.push("translate(",null,e,null,n);k.push({i:I-4,x:nt(c,d)},{i:I-2,x:nt(h,p)})}else(d||p)&&_.push("translate("+d+e+p+n)}(c.translateX,c.translateY,h.translateX,h.translateY,d,p),function s(c,h,d,p){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:nt(c,h)})):h&&d.push(i(d)+"rotate("+h+r)}(c.rotate,h.rotate,d,p),function a(c,h,d,p){c!==h?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:nt(c,h)}):h&&d.push(i(d)+"skewX("+h+r)}(c.skewX,h.skewX,d,p),function l(c,h,d,p,_,k){if(c!==d||h!==p){var I=_.push(i(_)+"scale(",null,",",null,")");k.push({i:I-4,x:nt(c,d)},{i:I-2,x:nt(h,p)})}else(1!==d||1!==p)&&_.push(i(_)+"scale("+d+","+p+")")}(c.scaleX,c.scaleY,h.scaleX,h.scaleY,d,p),c=h=null,function(_){for(var y,k=-1,I=p.length;++k<I;)d[(y=p[k]).i]=y.x(_);return d.join("")}}}var _l=Xi(function ml(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Sn:Wi(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),yl=Xi(function gl(t){return null!=t&&(Se||(Se=document.createElementNS("http://www.w3.org/2000/svg","g")),Se.setAttribute("transform",t),t=Se.transform.baseVal.consolidate())?Wi((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Sn},", ",")",")");function vl(t,e){var n,r;return function(){var i=ot(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function wl(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=ot(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Fn(t,e,n){var r=t._id;return t.each(function(){var i=ot(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return et(i,r).value[e]}}function kn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Zi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Wt(){}var Fe=1/.7,Vt="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bl=/^#([0-9a-f]{3,8})$/,xl=new RegExp(`^rgb\\(${Vt},${Vt},${Vt}\\)$`),Al=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),Vl=new RegExp(`^rgba\\(${Vt},${Vt},${Vt},${Zt}\\)$`),Ml=new RegExp(`^rgba\\(${st},${st},${st},${Zt}\\)$`),El=new RegExp(`^hsl\\(${Zt},${st},${st}\\)$`),Dl=new RegExp(`^hsla\\(${Zt},${st},${st},${Zt}\\)$`),Ji={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ki(){return this.rgb().formatHex()}function Qi(){return this.rgb().formatRgb()}function _t(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?to(e):3===n?new J(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ke(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ke(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=xl.exec(t))?new J(e[1],e[2],e[3],1):(e=Al.exec(t))?new J(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Vl.exec(t))?ke(e[1],e[2],e[3],e[4]):(e=Ml.exec(t))?ke(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=El.exec(t))?ro(e[1],e[2]/100,e[3]/100,1):(e=Dl.exec(t))?ro(e[1],e[2]/100,e[3]/100,e[4]):Ji.hasOwnProperty(t)?to(Ji[t]):"transparent"===t?new J(NaN,NaN,NaN,0):null}function to(t){return new J(t>>16&255,t>>8&255,255&t,1)}function ke(t,e,n,r){return r<=0&&(t=e=n=NaN),new J(t,e,n,r)}function Fl(t){return t instanceof Wt||(t=_t(t)),t?new J((t=t.rgb()).r,t.g,t.b,t.opacity):new J}function Oe(t,e,n,r){return 1===arguments.length?Fl(t):new J(t,e,n,null==r?1:r)}function J(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function eo(){return`#${vt(this.r)}${vt(this.g)}${vt(this.b)}`}function no(){const t=Te(this.opacity);return`${1===t?"rgb(":"rgba("}${yt(this.r)}, ${yt(this.g)}, ${yt(this.b)}${1===t?")":`, ${t})`}`}function Te(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function yt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vt(t){return((t=yt(t))<16?"0":"")+t.toString(16)}function ro(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rt(t,e,n,r)}function io(t){if(t instanceof rt)return new rt(t.h,t.s,t.l,t.opacity);if(t instanceof Wt||(t=_t(t)),!t)return new rt;if(t instanceof rt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new rt(s,a,l,t.opacity)}function rt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function oo(t){return(t=(t||0)%360)<0?t+360:t}function Pe(t){return Math.max(0,Math.min(1,t||0))}function On(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function so(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}kn(Wt,_t,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ki,formatHex:Ki,formatHex8:function Nl(){return this.rgb().formatHex8()},formatHsl:function Sl(){return io(this).formatHsl()},formatRgb:Qi,toString:Qi}),kn(J,Oe,Zi(Wt,{brighter(t){return t=null==t?Fe:Math.pow(Fe,t),new J(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new J(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new J(yt(this.r),yt(this.g),yt(this.b),Te(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eo,formatHex:eo,formatHex8:function kl(){return`#${vt(this.r)}${vt(this.g)}${vt(this.b)}${vt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:no,toString:no})),kn(rt,function Ol(t,e,n,r){return 1===arguments.length?io(t):new rt(t,e,n,null==r?1:r)},Zi(Wt,{brighter(t){return t=null==t?Fe:Math.pow(Fe,t),new rt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new J(On(t>=240?t-240:t+120,i,r),On(t,i,r),On(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new rt(oo(this.h),Pe(this.s),Pe(this.l),Te(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Te(this.opacity);return`${1===t?"hsl(":"hsla("}${oo(this.h)}, ${100*Pe(this.s)}%, ${100*Pe(this.l)}%${1===t?")":`, ${t})`}`}}));const Tn=t=>()=>t;function uo(t,e){var n=e-t;return n?function ao(t,e){return function(n){return t+n*e}}(t,n):Tn(isNaN(t)?e:t)}const Ie=function t(e){var n=function Gl(t){return 1==(t=+t)?uo:function(e,n){return n-e?function Il(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Tn(isNaN(e)?n:e)}}(e);function r(i,o){var s=n((i=Oe(i)).r,(o=Oe(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=uo(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=a(h),i.b=l(h),i.opacity=c(h),i+""}}return r.gamma=t,r}(1);function lo(t){return function(e){var s,a,n=e.length,r=new Array(n),i=new Array(n),o=new Array(n);for(s=0;s<n;++s)a=Oe(e[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=t(r),i=t(i),o=t(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}lo(function Tl(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1];return so((n-r/e)*e,r>0?t[r-1]:2*i-o,i,o,r<e-1?t[r+2]:2*o-i)}}),lo(function Pl(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return so((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}});var Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,In=new RegExp(Pn.source,"g");function co(t,e){var r,i,o,n=Pn.lastIndex=In.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(r=Pn.exec(t))&&(i=In.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:nt(r,i)})),n=In.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function Rl(t){return function(e){return t(e)+""}}(l[0].x):function Bl(t){return function(){return t}}(e):(e=l.length,function(c){for(var d,h=0;h<e;++h)a[(d=l[h]).i]=d.x(c);return a.join("")})}function ho(t,e){var n;return("number"==typeof e?nt:e instanceof _t?Ie:(n=_t(e))?(e=n,Ie):co)(t,e)}function zl(t){return function(){this.removeAttribute(t)}}function $l(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hl(t,e,n){var r,o,i=n+"";return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Ll(t,e,n){var r,o,i=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Ul(t,e,n){var r,i,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttribute(t):(s=this.getAttribute(t))===(l=a+"")?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function Yl(t,e,n){var r,i,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local))===(l=a+"")?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function jl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Wl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Xl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Wl(t,o)),n}return i._value=e,i}function Zl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&jl(t,o)),n}return i._value=e,i}function Kl(t,e){return function(){Nn(this,t).delay=+e.apply(this,arguments)}}function Ql(t,e){return e=+e,function(){Nn(this,t).delay=e}}function ec(t,e){return function(){ot(this,t).duration=+e.apply(this,arguments)}}function nc(t,e){return e=+e,function(){ot(this,t).duration=e}}function ic(t,e){if("function"!=typeof e)throw new Error;return function(){ot(this,t).ease=e}}function hc(t,e,n){var r,i,o=function cc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e})}(e)?Nn:ot;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}var _c=Lt.prototype.constructor;function fo(t){return function(){this.style.removeProperty(t)}}function Ac(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Vc(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Ac(t,s,n)),r}return o._value=e,o}function Sc(t){return function(e){this.textContent=t.call(this,e)}}function Fc(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Sc(i)),e}return r._value=t,r}var Pc=0;function at(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function po(){return++Pc}var ut=Lt.prototype;at.prototype=function Ic(t){return Lt().transition(t)}.prototype={constructor:at,select:function mc(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=bn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var h,d,a=r[s],l=a.length,c=o[s]=new Array(l),p=0;p<l;++p)(h=a[p])&&(d=t.call(h,h.__data__,p,a))&&("__data__"in h&&(d.__data__=h.__data__),c[p]=d,Ne(c[p],e,n,p,c,et(h,n)));return new at(o,this._parents,e,n)},selectAll:function gc(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=xi(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var h,l=r[a],c=l.length,d=0;d<c;++d)if(h=l[d]){for(var _,p=t.call(h,h.__data__,d,l),k=et(h,n),I=0,y=p.length;I<y;++I)(_=p[I])&&Ne(_,e,n,I,p,k);o.push(p),s.push(h)}return new at(o,s,e,n)},selectChild:ut.selectChild,selectChildren:ut.selectChildren,filter:function uc(t){"function"!=typeof t&&(t=Ai(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var l,o=e[i],s=o.length,a=r[i]=[],c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new at(r,this._parents,this._name,this._id)},merge:function lc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=Math.min(r,n.length),s=new Array(r),a=0;a<o;++a)for(var p,l=e[a],c=n[a],h=l.length,d=s[a]=new Array(h),_=0;_<h;++_)(p=l[_]||c[_])&&(d[_]=p);for(;a<r;++a)s[a]=e[a];return new at(s,this._parents,this._name,this._id)},selection:function yc(){return new _c(this._groups,this._parents)},transition:function Oc(){for(var t=this._name,e=this._id,n=po(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l,s=r[o],a=s.length,c=0;c<a;++c)if(l=s[c]){var h=et(l,e);Ne(l,t,n,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new at(r,this._parents,t,n)},call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:function fc(t,e){var n=this._id;return arguments.length<2?et(this.node(),n).on.on(t):this.each(hc(n,t,e))},attr:function ql(t,e){var n=Ce(t),r="transform"===n?yl:ho;return this.attrTween(t,"function"==typeof e?(n.local?Yl:Ul)(n,r,Fn(this,"attr."+t,e)):null==e?(n.local?$l:zl)(n):(n.local?Ll:Hl)(n,r,e))},attrTween:function Jl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Ce(t);return this.tween(n,(r.local?Xl:Zl)(r,e))},style:function xc(t,e,n){var r="transform"==(t+="")?_l:ho;return null==e?this.styleTween(t,function vc(t,e){var n,r,i;return function(){var o=xt(this,t),s=(this.style.removeProperty(t),xt(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,fo(t)):"function"==typeof e?this.styleTween(t,function Cc(t,e,n){var r,i,o;return function(){var s=xt(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=xt(this,t)),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}(t,r,Fn(this,"style."+t,e))).each(function bc(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var l=ot(this,t),c=l.on,h=null==l.value[o]?a||(a=fo(e)):void 0;(c!==n||i!==h)&&(r=(n=c).copy()).on(s,i=h),l.on=r}}(this._id,t)):this.styleTween(t,function wc(t,e,n){var r,o,i=n+"";return function(){var s=xt(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function Mc(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Vc(t,e,null==n?"":n))},text:function Nc(t){return this.tween("text","function"==typeof t?function Dc(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Fn(this,"text",t)):function Ec(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function kc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Fc(t))},remove:function pc(){return this.on("end.remove",function dc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Cl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s,r=et(this.node(),n).tween,i=0,o=r.length;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((null==e?vl:wl)(n,t,e))},delay:function tc(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Kl:Ql)(e,t)):et(this.node(),e).delay},duration:function rc(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ec:nc)(e,t)):et(this.node(),e).duration},ease:function oc(t){var e=this._id;return arguments.length?this.each(ic(e,t)):et(this.node(),e).ease},easeVarying:function ac(t){if("function"!=typeof t)throw new Error;return this.each(function sc(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;ot(this,t).ease=n}}(this._id,t))},end:function Tc(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0==--i&&o()}};n.each(function(){var c=ot(this,r),h=c.on;h!==t&&((e=(t=h).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),0===i&&o()})},[Symbol.iterator]:ut[Symbol.iterator]};var Bc={time:null,delay:0,duration:250,ease:function Gc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Rc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Lt.prototype.interrupt=function pl(t){return this.each(function(){!function dl(t,e){var r,i,s,n=t.__transition,o=!0;if(n){for(s in e=null==e?null:e+"",n)(r=n[s]).name===e?(i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]):o=!1;o&&delete t.__transition}}(this,t)})},Lt.prototype.transition=function zc(t){var e,n;t instanceof at?(e=t._id,t=t._name):(e=po(),(n=Bc).time=Vn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l,s=r[o],a=s.length,c=0;c<a;++c)(l=s[c])&&Ne(l,t,e,c,s,n||Rc(l,e));return new at(r,this._parents,t,e)};Math;function Jt(t){return{type:t}}["w","e"].map(Jt),["n","s"].map(Jt),["n","w","e","s","nw","ne","sw","se"].map(Jt);var $n=Math.sqrt(50),Hn=Math.sqrt(10),Ln=Math.sqrt(2);function wo(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=$n?10:o>=Hn?5:o>=Ln?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=$n?10:o>=Hn?5:o>=Ln?2:1)}function Re(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zc(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Co(t){let e,n,r;function i(a,l,c=0,h=a.length){if(c<h){if(0!==e(l,l))return h;do{const d=c+h>>>1;n(a[d],l)<0?c=d+1:h=d}while(c<h)}return c}return 2!==t.length?(e=Re,n=(a,l)=>Re(t(a),l),r=(a,l)=>t(a)-l):(e=t===Re||t===Zc?t:Jc,n=t,r=t),{left:i,center:function s(a,l,c=0,h=a.length){const d=i(a,l,c,h-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d},right:function o(a,l,c=0,h=a.length){if(c<h){if(0!==e(l,l))return h;do{const d=c+h>>>1;n(a[d],l)<=0?c=d+1:h=d}while(c<h)}return c}}}function Jc(){return 0}const Qc=Co(Re).right,th=(Co(function Kc(t){return null===t?NaN:+t}),Qc);function xo(t,e){var s,n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n);for(s=0;s<r;++s)i[s]=Un(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function eh(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function nh(t,e){var i,n={},r={};for(i in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)i in t?n[i]=Un(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}function rh(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Un(t,e){var r,n=typeof e;return null==e||"boolean"===n?Tn(e):("number"===n?nt:"string"===n?(r=_t(e))?(e=r,Ie):co:e instanceof _t?Ie:e instanceof Date?eh:function ih(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?rh:Array.isArray(e)?xo:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?nh:nt)(t,e)}function oh(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ah(t){return+t}var Ao=[0,1];function Dt(t){return t}function Yn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function sh(t){return function(){return t}}(isNaN(e)?NaN:.5)}function lh(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Yn(i,r),o=n(s,o)):(r=Yn(r,i),o=n(o,s)),function(a){return o(r(a))}}function ch(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Yn(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=th(t,a,1,r)-1;return o[l](i[l](a))}}function hh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dh(){return function fh(){var r,i,o,a,l,c,t=Ao,e=Ao,n=Un,s=Dt;function h(){var p=Math.min(t.length,e.length);return s!==Dt&&(s=function uh(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}(t[0],t[p-1])),a=p>2?ch:lh,l=c=null,d}function d(p){return null==p||isNaN(p=+p)?o:(l||(l=a(t.map(r),e,n)))(r(s(p)))}return d.invert=function(p){return s(i((c||(c=a(e,t.map(r),nt)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,ah),h()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),h()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=oh,h()},d.clamp=function(p){return arguments.length?(s=!!p||Dt,h()):s!==Dt},d.interpolate=function(p){return arguments.length?(n=p,h()):n},d.unknown=function(p){return arguments.length?(o=p,d):o},function(p,_){return r=p,i=_,h()}}()(Dt,Dt)}function ph(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Vo,mh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ze(t){if(!(e=mh.exec(t)))throw new Error("invalid format: "+t);var e;return new qn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function qn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function $e(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Nt(t){return(t=$e(Math.abs(t)))?t[1]:NaN}function Mo(t,e){var n=$e(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ze.prototype=qn.prototype,qn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Eo={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function gh(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Mo(100*t,e),r:Mo,s:function Ch(t,e){var n=$e(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Vo=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+$e(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Do(t){return t}var He,Fo,ko,No=Array.prototype.map,So=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Eh(t){var e=t.domain;return t.ticks=function(n){var r=e();return function Wc(t,e,n){var r,o,s,a,i=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(a=wo(t,e,n))||!isFinite(a))return[];if(a>0){let l=Math.round(t/a),c=Math.round(e/a);for(l*a<t&&++l,c*a>e&&--c,s=new Array(o=c-l+1);++i<o;)s[i]=(l+i)*a}else{a=-a;let l=Math.round(t*a),c=Math.round(e*a);for(l/a<t&&++l,c/a>e&&--c,s=new Array(o=c-l+1);++i<o;)s[i]=(l+i)/a}return r&&s.reverse(),s}(r[0],r[r.length-1],null==n?10:n)},t.tickFormat=function(n,r){var i=e();return function Mh(t,e,n,r){var o,i=function Xc(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=$n?i*=10:o>=Hn?i*=5:o>=Ln&&(i*=2),e<t?-i:i}(t,e,n);switch((r=ze(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null==r.precision&&!isNaN(o=function _h(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Nt(e)/3)))-Nt(Math.abs(t)))}(i,s))&&(r.precision=o),ko(r,s);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(o=function Ah(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nt(e)-Nt(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(o=function Vh(t){return Math.max(0,-Nt(Math.abs(t)))}(i))&&(r.precision=o-2*("%"===r.type))}return Fo(r)}(i[0],i[i.length-1],null==n?10:n,r)},t.nice=function(n){null==n&&(n=10);var l,c,r=e(),i=0,o=r.length-1,s=r[i],a=r[o],h=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);h-- >0;){if((c=wo(s,a,n))===l)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else{if(!(c<0))break;s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c}l=c}return t},t}function jn(){var t=dh();return t.copy=function(){return hh(t,jn())},ph.apply(t,arguments),Eh(t)}!function xh(t){He=function bh(t){var e=void 0===t.grouping||void 0===t.thousands?Do:function yh(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}(No.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Do:function vh(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}(No.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"\u2212":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(d){var p=(d=ze(d)).fill,_=d.align,k=d.sign,I=d.symbol,y=d.zero,g=d.width,x=d.comma,w=d.precision,D=d.trim,M=d.type;"n"===M?(x=!0,M="g"):Eo[M]||(void 0===w&&(w=12),D=!0,M="g"),(y||"0"===p&&"="===_)&&(y=!0,p="0",_="=");var T="$"===I?n:"#"===I&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",$="$"===I?r:/[%p]/.test(M)?s:"",B=Eo[M],L=/[defgprs%]/.test(M);function G(A){var f,C,m,R=T,O=$;if("c"===M)O=B(A)+O,A="";else{var v=(A=+A)<0||1/A<0;if(A=isNaN(A)?l:B(Math.abs(A),w),D&&(A=function wh(t){t:for(var i,e=t.length,n=1,r=-1;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(A)),v&&0==+A&&"+"!==k&&(v=!1),R=(v?"("===k?k:a:"-"===k||"("===k?"":k)+R,O=("s"===M?So[8+Vo/3]:"")+O+(v&&"("===k?")":""),L)for(f=-1,C=A.length;++f<C;)if(48>(m=A.charCodeAt(f))||m>57){O=(46===m?i+A.slice(f+1):A.slice(f))+O,A=A.slice(0,f);break}}x&&!y&&(A=e(A,1/0));var V=R.length+A.length+O.length,b=V<g?new Array(g-V+1).join(p):"";switch(x&&y&&(A=e(b+A,b.length?g-O.length:1/0),b=""),_){case"<":A=R+A+O+b;break;case"=":A=R+b+A+O;break;case"^":A=b.slice(0,V=b.length>>1)+R+A+O+b.slice(V);break;default:A=b+R+A+O}return o(A)}return w=void 0===w?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),G.toString=function(){return d+""},G}return{format:c,formatPrefix:function h(d,p){var _=c(((d=ze(d)).type="f",d)),k=3*Math.max(-8,Math.min(8,Math.floor(Nt(p)/3))),I=Math.pow(10,-k),y=So[8+k/3];return function(g){return _(I*g)+y}}}}(t),Fo=He.format,ko=He.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const Wn=Math.PI,Xn=2*Wn,wt=1e-6,Nh=Xn-wt;function Zn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Oo(){return new Zn}Zn.prototype=Oo.prototype={constructor:Zn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){var o=this._x1,s=this._y1,a=(n=+n)-(t=+t),l=(r=+r)-(e=+e),c=o-t,h=s-e,d=c*c+h*h;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>wt)if(Math.abs(h*a-l*c)>wt&&i){var p=n-o,_=r-s,k=a*a+l*l,I=p*p+_*_,y=Math.sqrt(k),g=Math.sqrt(d),x=i*Math.tan((Wn-Math.acos((k+d-I)/(2*y*g)))/2),w=x/g,D=x/y;Math.abs(w-1)>wt&&(this._+="L"+(t+w*c)+","+(e+w*h)),this._+="A"+i+","+i+",0,0,"+ +(h*p>c*_)+","+(this._x1=t+D*a)+","+(this._y1=e+D*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+s,c=e+a,h=1^o,d=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>wt||Math.abs(this._y1-c)>wt)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%Xn+Xn),d>Nh?this._+="A"+n+","+n+",0,1,"+h+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):d>wt&&(this._+="A"+n+","+n+",0,"+ +(d>=Wn)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Sh=Oo;function St(t){return function(){return t}}function To(t){this._context=t}function kh(t){return new To(t)}function Oh(t){return t[0]}function Th(t){return t[1]}function Ft(t,e,n){this.k=t,this.x=e,this.y=n}To.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Ft.prototype={constructor:Ft,scale:function(t){return 1===t?this:new Ft(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ft(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Ft(1,0,0);let Lh=(()=>{class t{constructor(){this.populationComposition=null,this.width=500,this.height=500,this.axisWidth=100,this.axisHeight=20}ngOnChanges(n){n.populationComposition.firstChange&&(this.svg=function Dh(t){return"string"==typeof t?new tt([[document.querySelector(t)]],[document.documentElement]):new tt([[t]],Pi)}("#line-chart").append("svg").attr("width",this.width+this.axisWidth).attr("height",this.height+100+this.axisHeight)),null!==this.populationComposition&&this.drawChart(this.populationComposition)}drawChart(n){this.svg.selectAll("path").remove(),this.svg.selectAll("g").remove();const r=jn().domain(this.xDomain(n)).range([0,this.width]),i=jn().domain(this.yDomain(n)).range([this.height+this.axisHeight,0]);n.forEach((a,l)=>{this.drawLine(r,i,a,l)});const o=function ba(t){return ve(3,t)}(r),s=function xa(t){return ve(4,t)}(i);this.svg.append("g").attr("transform",`translate(${this.axisWidth}, ${this.height+this.axisHeight+20})`).call(o),this.svg.append("g").attr("transform",`translate(${this.axisWidth}, ${this.axisHeight})`).call(s)}drawLine(n,r,i,o){const a=function Ph(t,e){var n=St(!0),r=null,i=kh,o=null;function s(a){var l,h,p,c=(a=function Fh(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(a)).length,d=!1;for(null==r&&(o=i(p=Sh())),l=0;l<=c;++l)!(l<c&&n(h=a[l],l,a))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(h,l,a),+e(h,l,a));if(p)return o=null,p+""||null}return t="function"==typeof t?t:void 0===t?Oh:St(t),e="function"==typeof e?e:void 0===e?Th:St(e),s.x=function(a){return arguments.length?(t="function"==typeof a?a:St(+a),s):t},s.y=function(a){return arguments.length?(e="function"==typeof a?a:St(+a),s):e},s.defined=function(a){return arguments.length?(n="function"==typeof a?a:St(!!a),s):n},s.curve=function(a){return arguments.length?(i=a,null!=r&&(o=i(r)),s):i},s.context=function(a){return arguments.length?(null==a?r=o=null:o=i(r=a),s):r},s}().x(l=>n(l.year)).y(l=>r(l.value));this.svg.append("path").attr("d",a(i)).attr("fill","none").attr("stroke",["blue","green","purple","royalblue","red","cyan","magenta","silver","olive","navy"][o]).attr("transform",`translate(${this.axisWidth}, ${this.axisHeight})`)}xDomain(n){const i=n.flat().map(a=>a.year),o=Math.max(...i);return[Math.min(...i),o]}yDomain(n){const i=n.flat().map(l=>l.value),o=Math.max(...i),a=10**(String(o).length-2);return[0,Math.round(o/a)*a+5*a]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-line-chart"]],inputs:{populationComposition:"populationComposition"},features:[u.TTD],decls:1,vars:0,consts:[["id","line-chart",2,"width","600px","height","600px"]],template:function(n,r){1&n&&(u.O4$(),u._UZ(0,"svg",0))},styles:["svg[_ngcontent-%COMP%]{margin:16px}"]}),t})(),Uh=(()=>{class t{constructor(){this.prefectures=null,this.populationComposition=null,this.prefSelected=new u.vpe}selectPref(n){this.prefSelected.emit(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-ly-total-population-chart"]],inputs:{prefectures:"prefectures",populationComposition:"populationComposition"},outputs:{prefSelected:"prefSelected"},decls:6,vars:2,consts:[[1,"label"],[3,"prefectures","prefChecked"],[3,"populationComposition"]],template:function(n,r){1&n&&(u.TgZ(0,"section")(1,"div",0),u._uU(2,"\u90fd\u9053\u5e9c\u770c"),u.qZA(),u.TgZ(3,"app-prefectures-form",1),u.NdJ("prefChecked",function(o){return r.selectPref(o)}),u.qZA()(),u.TgZ(4,"section"),u._UZ(5,"app-line-chart",2),u.qZA()),2&n&&(u.xp6(3),u.Q6J("prefectures",r.prefectures),u.xp6(2),u.Q6J("populationComposition",r.populationComposition))},directives:[ma,Lh],styles:[".label[_ngcontent-%COMP%]{font-size:large}"]}),t})();const Yh=[{path:"",component:(()=>{class t{constructor(n){this._usecase=n,this.prefectures$=this._usecase.prefectures$,this.populationComposition$=this._usecase.populationComposition$}ngOnInit(){this._usecase.fetchPrefectures()}notifySelectedPrefectures(n){this._usecase.fetchPopulationComposition(n)}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(Ci))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-total-population-chart"]],features:[u._Bn([Ci])],decls:3,vars:6,consts:[[3,"prefectures","populationComposition","prefSelected"]],template:function(n,r){1&n&&(u.TgZ(0,"app-ly-total-population-chart",0),u.NdJ("prefSelected",function(o){return r.notifySelectedPrefectures(o)}),u.ALo(1,"async"),u.ALo(2,"async"),u.qZA()),2&n&&u.Q6J("prefectures",u.lcZ(1,2,r.prefectures$))("populationComposition",u.lcZ(2,4,r.populationComposition$))},directives:[Uh],pipes:[Ot.Ov],styles:[""]}),t})(),pathMatch:"full"}];let qh=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[ii.Bz.forChild(Yh)],ii.Bz]}),t})(),jh=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[Ot.ez,qh,Rs]]}),t})()}}]);